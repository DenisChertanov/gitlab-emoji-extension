(()=>{async function e(){let e=await chrome.storage.local.get(["lastUsagedEmojisSave"],(function(e){console.log("ppp"),console.log(e.lastUsagedEmojisSave)}));return void 0===e&&(e=new Set),e instanceof Set||(e=new Set),console.log("ddd"),console.log(e),e}chrome.runtime.onMessage.addListener(((o,s,a)=>{const{type:t,value:n,emoji:l}=o;if("EMOJI_USAGE"===t&&async function(o){let s=await e();if(s.has(o)&&s.delete(o),s.add(o),s.size>45){const[e]=s;s.delete(e)}await chrome.storage.local.set({lastUsagedEmojisSave:s},(function(){console.log("...saved")})),console.log("service_worker lastUsagedEmojis:",s)}(l),"LAST_USAGED_EMOJIS"===t&&a(e()),"RANDOM_EMOJI"===t){const e=Math.floor(Math.random()*emojis.length),o=Math.floor(Math.random()*emojis[e].emojis.length);a(emojis[e].emojis[o])}}))})();